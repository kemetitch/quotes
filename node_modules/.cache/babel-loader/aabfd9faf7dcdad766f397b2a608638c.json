{"ast":null,"code":"import _objectSpread from\"E:/projects/advanced-react-router/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"E:/projects/advanced-react-router/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/projects/advanced-react-router/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/projects/advanced-react-router/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useReducer,useCallback}from\"react\";function httpReducer(state,action){if(action.type===\"SEND\"){return{data:null,error:null,status:\"pending\"};}if(action.type===\"SUCCESS\"){return{data:action.responseData,error:null,status:\"completed\"};}if(action.type===\"ERROR\"){return{data:null,error:action.errorMessage,status:\"completed\"};}return state;}function useHttp(requestFunction){var startWithPending=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var _useReducer=useReducer(httpReducer,{status:startWithPending?\"pending\":null,data:null,error:null}),_useReducer2=_slicedToArray(_useReducer,2),httpState=_useReducer2[0],dispatch=_useReducer2[1];var sendRequest=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(requestData){var responseData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:\"SEND\"});_context.prev=1;_context.next=4;return requestFunction(requestData);case 4:responseData=_context.sent;dispatch({type:\"SUCCESS\",responseData:responseData});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);dispatch({type:\"ERROR\",errorMessage:_context.t0.message||\"Something went wrong!\"});case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function(_x){return _ref.apply(this,arguments);};}(),[requestFunction]);return _objectSpread({sendRequest:sendRequest},httpState);}export default useHttp;","map":{"version":3,"names":["useReducer","useCallback","httpReducer","state","action","type","data","error","status","responseData","errorMessage","useHttp","requestFunction","startWithPending","httpState","dispatch","sendRequest","requestData","message"],"sources":["E:/projects/advanced-react-router/src/hooks/use-http.js"],"sourcesContent":["import { useReducer, useCallback } from \"react\";\r\n\r\nfunction httpReducer(state, action) {\r\n  if (action.type === \"SEND\") {\r\n    return {\r\n      data: null,\r\n      error: null,\r\n      status: \"pending\",\r\n    };\r\n  }\r\n\r\n  if (action.type === \"SUCCESS\") {\r\n    return {\r\n      data: action.responseData,\r\n      error: null,\r\n      status: \"completed\",\r\n    };\r\n  }\r\n\r\n  if (action.type === \"ERROR\") {\r\n    return {\r\n      data: null,\r\n      error: action.errorMessage,\r\n      status: \"completed\",\r\n    };\r\n  }\r\n\r\n  return state;\r\n}\r\n\r\nfunction useHttp(requestFunction, startWithPending = false) {\r\n  const [httpState, dispatch] = useReducer(httpReducer, {\r\n    status: startWithPending ? \"pending\" : null,\r\n    data: null,\r\n    error: null,\r\n  });\r\n\r\n  const sendRequest = useCallback(\r\n    async function (requestData) {\r\n      dispatch({ type: \"SEND\" });\r\n      try {\r\n        const responseData = await requestFunction(requestData);\r\n        dispatch({ type: \"SUCCESS\", responseData });\r\n      } catch (error) {\r\n        dispatch({\r\n          type: \"ERROR\",\r\n          errorMessage: error.message || \"Something went wrong!\",\r\n        });\r\n      }\r\n    },\r\n    [requestFunction]\r\n  );\r\n\r\n  return {\r\n    sendRequest,\r\n    ...httpState,\r\n  };\r\n}\r\n\r\nexport default useHttp;\r\n"],"mappings":"2eAAA,OAASA,UAAU,CAAEC,WAAW,KAAQ,OAAO,CAE/C,QAASC,YAAW,CAACC,KAAK,CAAEC,MAAM,CAAE,CAClC,GAAIA,MAAM,CAACC,IAAI,GAAK,MAAM,CAAE,CAC1B,MAAO,CACLC,IAAI,CAAE,IAAI,CACVC,KAAK,CAAE,IAAI,CACXC,MAAM,CAAE,SACV,CAAC,CACH,CAEA,GAAIJ,MAAM,CAACC,IAAI,GAAK,SAAS,CAAE,CAC7B,MAAO,CACLC,IAAI,CAAEF,MAAM,CAACK,YAAY,CACzBF,KAAK,CAAE,IAAI,CACXC,MAAM,CAAE,WACV,CAAC,CACH,CAEA,GAAIJ,MAAM,CAACC,IAAI,GAAK,OAAO,CAAE,CAC3B,MAAO,CACLC,IAAI,CAAE,IAAI,CACVC,KAAK,CAAEH,MAAM,CAACM,YAAY,CAC1BF,MAAM,CAAE,WACV,CAAC,CACH,CAEA,MAAOL,MAAK,CACd,CAEA,QAASQ,QAAO,CAACC,eAAe,CAA4B,IAA1BC,iBAAgB,2DAAG,KAAK,CACxD,gBAA8Bb,UAAU,CAACE,WAAW,CAAE,CACpDM,MAAM,CAAEK,gBAAgB,CAAG,SAAS,CAAG,IAAI,CAC3CP,IAAI,CAAE,IAAI,CACVC,KAAK,CAAE,IACT,CAAC,CAAC,4CAJKO,SAAS,iBAAEC,QAAQ,iBAM1B,GAAMC,YAAW,CAAGf,WAAW,4FAC7B,iBAAgBgB,WAAW,qIACzBF,QAAQ,CAAC,CAAEV,IAAI,CAAE,MAAO,CAAC,CAAC,CAAC,sCAEEO,gBAAe,CAACK,WAAW,CAAC,QAAjDR,YAAY,eAClBM,QAAQ,CAAC,CAAEV,IAAI,CAAE,SAAS,CAAEI,YAAY,CAAZA,YAAa,CAAC,CAAC,CAAC,+EAE5CM,QAAQ,CAAC,CACPV,IAAI,CAAE,OAAO,CACbK,YAAY,CAAE,YAAMQ,OAAO,EAAI,uBACjC,CAAC,CAAC,CAAC,oEAEN,+DACD,CAACN,eAAe,CAAC,CAClB,CAED,sBACEI,WAAW,CAAXA,WAAW,EACRF,SAAS,EAEhB,CAEA,cAAeH,QAAO"},"metadata":{},"sourceType":"module"}